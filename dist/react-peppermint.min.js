!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("react-peppermint",[],e):"object"==typeof exports?exports["react-peppermint"]=e():t["react-peppermint"]=e()}(this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=require("react")},function(t,e,n){"use strict";function r(t,e,n){return t[e]=n}function o(t,e){return t[e]}n.r(e);var i,u=Symbol("REACT-VIEW-MODEL.INSTANCE_INFO"),f=Symbol("REACT-VIEW-MODEL.CLASS_INFO");function c(t,e){if(t&&t.constructor){var n=t.constructor;return function(t){return"symbol"==typeof t||t instanceof Symbol}(e)&&Object.getOwnPropertySymbols(n).includes(e)?n[e]:"string"==typeof e&&Object.getOwnPropertyNames(n).includes(e)?n[e]:void 0}}function s(t,e){void 0===e&&(e=!1);for(var n=function(t,e){for(var n={};t.constructor!==Object;){var r=Object.getOwnPropertyDescriptors(t);if(e&&e.length){for(var o={},u=0,f=Object.keys(r);u<f.length;u++)for(var c=f[u],s=0,a=e;s<a.length;s++){var l=a[s],h=!1;switch(l){case i.None:break;case i.Field:h="function"!=typeof r[c].value&&"function"!=typeof r[c].get;break;case i.Property:h="function"==typeof r[c].get;break;case i.Method:h="function"==typeof r[c].value&&"function"!=typeof r[c].get;break;default:throw new Error("Property flag not supported: "+l)}h&&(o[c]=r[c])}r=o}n=Object.assign(r,n),t=p(t)}return n.constructor&&delete n.constructor,n}(t,[i.Method]),r={},o=0,u=Object.keys(n);o<u.length;o++){var f=u[o];r[f]=n[f].value,e&&(r[f]=r[f].bind(t))}return r}function p(t){if("object"==typeof t)return Object.getPrototypeOf(t);if("function"==typeof t)return t.prototype;throw new Error("Expected an object or a function. Got: "+t)}!function(t){t.None="None",t.Field="Field",t.Property="Property",t.Method="Method"}(i||(i={}));var a=function(){function t(){this.refresh={},this.refreshAll={}}return t.getInfo=function(e){if(e){var n=t.getOwnInfo(e);return n||(t.getBaseInfo(e)?t.initInfo(e):void 0)}},t.getOrInitInfo=function(e){var n=t.getInfo(e);return n||t.initInfo(e)},t.getOwnInfo=function(t){return"object"==typeof t?c(t,f):function(t,e){return Object.getOwnPropertySymbols(t).includes(e)&&o(t,e)}(t,f)},t.getBaseInfo=function(t){return"object"==typeof t?function(t,e){if(t&&t.constructor)return t.constructor[e]}(t,f):o(t,f)},t.initInfo=function(e){var n="function"==typeof e?e:e.constructor,i=o(n,f),u=Object.assign(new t,i);return r(n,f,u)},t}(),l=function(){function t(){this.refreshView=new Map}return t.getInfo=function(t){if(t)return o(t,u)},t.initInfo=function(e){var n=new t;return r(e,u,n)},t}();function h(t,e){a.getOrInitInfo(t).refresh[e]=!0}function y(t,e){a.getOrInitInfo(t).refreshAll[e]=!0}function v(t){a.getOrInitInfo(t)}var d,b=n(0),O=b.createContext(void 0),g=O.Provider,m=O.Consumer,w=function(){function t(t,e){this.internalResolver=t,this.refreshAll=e}return t.prototype.get=function(t){var e=this.internalResolver.get(t),n=a.getInfo(e);return n&&this.patchViewModel(e,n),e},t.prototype.patchViewModel=function(t,e){for(var n=this,r=l.initInfo(t),o=s(t),i=function(o){var i=t[o],u=e.refresh[o],f=e.refreshAll[o];if(u||f){t[o]=function(){var t=i.apply(this,arguments);return u?r.refreshView.forEach(function(t){return t()}):f&&n.refreshAll(),t}.bind(t)}else t[o]=i.bind(t)},u=0,f=Object.keys(o);u<f.length;u++){i(f[u])}},t}(),j=(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return j(e,t),e.prototype.render=function(){return this.setContainer(),b.createElement(g,{value:{resolver:this.vmResolver}},this.props.children)},e.prototype.setContainer=function(){this.props.resolver&&(this.vmResolver&&this.vmResolver.internalResolver===this.props.resolver||(this.vmResolver=new w(this.props.resolver,this.forceUpdate.bind(this))))},e}(b.PureComponent),_=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},E=function(t){return function(e){return function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return _(r,n),r.prototype.render=function(){var t=this;return b.createElement(m,null,function(n){return t.setVm(n.resolver),b.createElement(e,P({},t.vm,t.props))})},r.prototype.componentWillUnmount=function(){l.getInfo(this.vm).refreshView.delete(this)},r.prototype.setVm=function(e){if(!this.vm){this.vm=e.get(t);var n=l.getInfo(this.vm);if(!n)throw new Error("Class "+this.vm.constructor.name+" is used as a view-model but no decorator was used.");n.refreshView.set(this,this.forceUpdate.bind(this))}},r}(b.PureComponent)}};n.d(e,"fresh",function(){return h}),n.d(e,"veryFresh",function(){return y}),n.d(e,"viewModel",function(){return v}),n.d(e,"Provider",function(){return I}),n.d(e,"withViewModel",function(){return E})},function(t,e,n){t.exports=n(1)}])});