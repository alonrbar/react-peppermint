!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("react-peppermint",[],e):"object"==typeof exports?exports["react-peppermint"]=e():t["react-peppermint"]=e()}(this,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=require("react")},function(t,e,n){"use strict";function o(t,e,n){return t[e]=n}function r(t,e){return t[e]}n.r(e);var i,u=Symbol("REACT-VIEW-MODEL.INSTANCE_INFO"),c=Symbol("REACT-VIEW-MODEL.CLASS_INFO");function f(t,e){for(var n={};t.constructor!==Object;){var o=Object.getOwnPropertyDescriptors(t);if(e&&e.length){for(var r={},u=0,c=Object.keys(o);u<c.length;u++)for(var f=c[u],s=0,p=e;s<p.length;s++){var l=p[s],v=!1;switch(l){case i.None:break;case i.Field:v="function"!=typeof o[f].value&&"function"!=typeof o[f].get;break;case i.Property:v="function"==typeof o[f].get;break;case i.Method:v="function"==typeof o[f].value&&"function"!=typeof o[f].get;break;default:throw new Error("Property flag not supported: "+l)}v&&(r[f]=o[f])}o=r}n=Object.assign(o,n),t=a(t)}return n.constructor&&delete n.constructor,n}function s(t,e){if(t&&t.constructor){var n=t.constructor;return function(t){return"symbol"==typeof t||t instanceof Symbol}(e)&&Object.getOwnPropertySymbols(n).includes(e)?n[e]:"string"==typeof e&&Object.getOwnPropertyNames(n).includes(e)?n[e]:void 0}}function a(t){if("object"==typeof t)return Object.getPrototypeOf(t);if("function"==typeof t)return t.prototype;throw new Error("Expected an object or a function. Got: "+t)}!function(t){t.None="None",t.Field="Field",t.Property="Property",t.Method="Method"}(i||(i={}));var p=function(){function t(){this.action={},this.broadcast={}}return t.getInfo=function(e){if(e){var n=t.getOwnInfo(e);return n||(t.getBaseInfo(e)?t.initInfo(e):void 0)}},t.getOrInitInfo=function(e){var n=t.getInfo(e);return n||t.initInfo(e)},t.getOwnInfo=function(t){return"object"==typeof t?s(t,c):function(t,e){return Object.getOwnPropertySymbols(t).includes(e)&&r(t,e)}(t,c)},t.getBaseInfo=function(t){return"object"==typeof t?function(t,e){if(t&&t.constructor)return t.constructor[e]}(t,c):r(t,c)},t.initInfo=function(e){var n="function"==typeof e?e:e.constructor,i=r(n,c),u=Object.assign(new t,i);return o(n,c,u)},t}(),l=function(){function t(){}return t.getInfo=function(t){if(t)return r(t,u)},t.initInfo=function(e){var n=new t;return o(e,u,n)},t}(),v=function(){return function(t){this.immediate=!1,Object.assign(this,t)}}();function d(t,e){if(!e)return function(e,n){return h(e,n,t)};h.call(void 0,t,e)}function h(t,e,n){p.getOrInitInfo(t).action[e]=new v(n)}function y(t,e){p.getOrInitInfo(t).activate=e}function w(t,e){if(!e)return function(e,n){return m(e,n,t)};m.call(void 0,t,e)}function m(t,e,n){p.getOrInitInfo(t).broadcast[e]=new v(n)}function b(t,e){p.getOrInitInfo(t).deactivate=e}function g(t){p.getOrInitInfo(t)}var O,I=n(0),j=I.createContext(void 0),M=j.Provider,V=j.Consumer,P=function(){function t(t,e){this.viewsByViewModel=new Map,this.allViews=[],this.internalResolver=t,this.allViews.push(e)}return t.prototype.get=function(t){var e=this.internalResolver.get(t),n=p.getInfo(e);n&&(l.getInfo(e)||this.patchViewModel(e,n));return e},t.prototype.patchViewModel=function(t,e){var n=this,o=l.initInfo(t);o.activate=e.activate,o.deactivate=e.deactivate,o.addView=function(e){return n.addView(t,e)},o.removeView=function(e){return n.removeView(t,e)},function(t,e,n){for(var o=f(e,n),r=0,i=Object.keys(o);r<i.length;r++){var u=i[r];Object.defineProperty(t,u,o[u])}}(t,t,[i.Property]);for(var r=function(t,e){void 0===e&&(e=!1);for(var n=f(t,[i.Method]),o={},r=0,u=Object.keys(n);r<u.length;r++){var c=u[r];o[c]=n[c].value,e&&(o[c]=o[c].bind(t))}return o}(t),u=0,c=Object.keys(r);u<c.length;u++){var s=c[u];this.patchMethod(t,e,s)}},t.prototype.addView=function(t,e){var n=this.viewsByViewModel.get(t);n||(n=new Set,this.viewsByViewModel.set(t,n)),n.add(e),this.allViews.push(e)},t.prototype.removeView=function(t,e){var n=this.viewsByViewModel.get(t);n.delete(e),n.size||this.viewsByViewModel.delete(t),function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return t.splice(n,1)[0]}(this.allViews,e)},t.prototype.patchMethod=function(t,e,n){var o,r=this,i=t[n],u=e.action[n],c=e.broadcast[n],f=u||c;o=f?function(){var e,o=i.apply(this,arguments);return(e=o)&&"function"==typeof e.then&&!f.immediate?o.then(function(e){return r.refreshView(!!c,t),r.notifyMethodInvoked(t,n),e}):(r.refreshView(!!c,t),r.notifyMethodInvoked(t,n),o)}:i,t[n]=o.bind(t)},t.prototype.refreshView=function(t,e){var n;(n=t?this.allViews.slice():this.viewsByViewModel.get(e))&&n.forEach(function(t){t.forceUpdate()})},t.prototype.notifyMethodInvoked=function(t,e){var n=this.onMethodInvoked;n&&n({vm:t,methodName:e})},t}(),_=(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _(e,t),e.prototype.render=function(){return this.setContainer(),I.createElement(M,{value:{resolver:this.vmResolver}},this.props.children)},e.prototype.setContainer=function(){this.props.resolver&&(this.vmResolver&&this.vmResolver.internalResolver===this.props.resolver||(this.vmResolver=new P(this.props.resolver,this),this.vmResolver.onMethodInvoked=this.props.onMethodInvoked))},e}(I.PureComponent),k=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},S=function(t){return function(e){return function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return k(o,n),o.prototype.componentDidMount=function(){var t=l.getInfo(this.vm).activate;if(t){var e=this.vm[t];"function"==typeof e&&e()}},o.prototype.render=function(){var t=this;return I.createElement(V,null,function(n){if(!n)throw new Error("Context not found. Make sure you use the Provider component.");if(!n.resolver)throw new Error("Resolver not found. Make sure you use the Provider component.");t.setVm(n.resolver);var o=Object.assign({},t.vm,t.props);return I.createElement(e,x({},o))})},o.prototype.componentWillUnmount=function(){var t=l.getInfo(this.vm);t.removeView(this);var e=t.deactivate;if(e){var n=this.vm[e];"function"==typeof n&&n()}},o.prototype.setVm=function(e){if(!this.vm){this.vm=e.get(t);var n=l.getInfo(this.vm);if(!n)throw new Error("Class "+this.vm.constructor.name+" is used as a view-model but no decorator was used.");n.addView(this)}},o}(I.PureComponent)}};n.d(e,"action",function(){return d}),n.d(e,"activate",function(){return y}),n.d(e,"broadcast",function(){return w}),n.d(e,"deactivate",function(){return b}),n.d(e,"viewModel",function(){return g}),n.d(e,"Provider",function(){return E}),n.d(e,"withViewModel",function(){return S}),n.d(e,"ActionOptions",function(){return v})},function(t,e,n){t.exports=n(1)}])});